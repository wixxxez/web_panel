 {% extends "main_work_page/navigation_panel.html.twig" %}
 {% block title %}Web panel{% endblock %}

{% block head %} {{parent()}}
<style> 
#example .barcode {
   
   max-width: 50px;
    
    
   overflow:hidden;
    white-space: nowrap;
   overflow-x: visible; 
 
}
 .rem89 {
    width:89rem; 
 }
#example th {
   
   width: auto;
    
     
}
</style> 

 {% endblock %}
 
    {% block aside %}
    <body class="bg-gray-100 font-family-karla flex">
        {{ parent() }}
    <div class="w-full h-screen overflow-x-hidden border-t flex flex-col">
    {% endblock %}
    
        {% block header %}
            {{ parent() }}
             <main class="w-full flex-grow p-6">
          
            {% for flash_type, messages in app.flashes %}
                                    {% for message in messages %}
                                    
                                        {% if flash_type =='error' %}
                                            <div class="flex items-center p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
                                                    <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                                                    </svg>
                                                    <span class="sr-only">Info</span>
                                                    <div>
                                                        <span class="font-medium">&nbsp;&nbsp;Error.&nbsp;</span> {{ message }}
                                                    </div>
                                                    </div>
                                        {% else %}
                                          <div class="flex items-center p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400" role="alert">
                                        <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                                        </svg>
                                        <span class="sr-only">Info</span>
                                        <div>
                                            <span class="font-medium">Success!</span> {{ message }}
                                        </div>
                                        </div>
                                        {% endif %}
                                    {% endfor %}
                                {% endfor %}
        <div class="w-full overflow-x-hidden border-t flex flex-col">
                {% if 'ROLE_ADMIN' in app.user.roles  %}
            <button class="w-1/2 bg-white cta-btn font-semibold py-2 mt-5 rounded-br-lg rounded-bl-lg rounded-tr-lg shadow-lg hover:shadow-xl hover:bg-gray-300 flex items-center justify-center">
                <a href="{{ path('app_archive_delete') }}"><i class="fas fa-minus mr-3"></i> Delete accounts older than one month </a>
            </button>
            {% endif %} 
                    
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-dark">
    <h2 class="text-2xl font-bold mb-4">Archive</h2>
    <table id="example" class="table-auto w-full bg-dark">
        <thead>
            <tr>
                <th class="px-4 py-2" data-priority="1">Account Id</th>
                <th class="px-4 py-2" data-priority="2">Worker</th>
                <th class="px-4 py-2" data-priority="3">Sell</th>
                <th class="px-4 py-2" data-priority="4">Paid</th>
                <th class="px-4 py-2" data-priority="5">Event</th>
                <th class="px-4 py-2" data-priority="6">Seats</th>
                <th class="px-4 py-2" data-priority="7">Date</th>
                <th class="px-4 py-2" data-priority="8">Price</th>
                <th class="px-4 py-2" data-priority="9">bar1</th>
                <th class="px-4 py-2" data-priority="10">bar2</th>
                <th class="px-4 py-2" data-priority="11">Seats</th>
                <th class="px-4 py-2" data-priority="12">Price</th>
                <th class="px-4 py-2" data-priority="13">bar3</th>
                <th class="px-4 py-2" data-priority="14">bar4</th>
                <th class="px-4 py-2" data-priority="15" >Status</th>
            </tr>
        </thead>
        <tbody>
            {% for account in accounts %}
                                            <tr class="hover:bg-grey-lighter">
                                                <td class="border px-4 py-2"> {{ account.id }}</td>
                                                <td class="border px-4 py-2 hover:underline"> <a href = "{{ path('app_profile', {'id': account.workerID } ) }}"> {{ account.workerID }} </a> </td>
                                                <td class="border px-4 py-2"> {{ account.sell }} </td>
                                                <td class="border px-4 py-2"> {{ account.paid }} </td>
                                                <td class="border px-4 py-2"> {{ account.event }} </td>
                                                <td class="border px-4 py-2"> {{ account.seats }} </td>
                                                
                                                <td class="border px-4 py-2"> {{ account.date }} </td>
                                                <td class="border px-4 py-2"> {{ account.price }} </td>
                                                   <td class="border px-4 py-2 barcode"  > {{ account.barcode1 }} </td>
                                                <td class="border px-4 py-2 barcode"> {{ account.barcode2 }} </td>
                                                <td class="border px-4 py-2"> {{ account.seats2 }} </td>
                                                <td class="border px-4 py-2"> {{ account.price2 }} </td>
                                                <td class="border px-4 py-2 barcode"> {{ account.barcode3 }} </td>
                                                <td class="border px-4 py-2 barcode"> {{ account.barcode4 }} </td>
                                                {% if account.adminEvent == "Await" %}
                                                <td class="border px-4 py-2">
                                                    <button class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full">
                                                        <a href="{{ path('app_check_account_by_admin',{'id': account.id }) }}">  {{ account.adminEvent }} </a>
                                                    </button>
                                                </td>
                                                {% else %}
                                                    {% if account.adminEvent == "Sold" %}
                                                    <td class="border px-4 py-2">
                                                        <button class="bg-green-700 hover:bg-green-900 text-white font-bold py-2 px-4 rounded-full">
                                                            <a href="{{ path('app_check_account_by_admin',{'id': account.id }) }}">  {{ account.adminEvent }} </a>
                                                        </button>
                                                    </td>
                                                    {% else %}
                                                    <td class="border px-4 py-2">
                                                        <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full">
                                                            <a href="{{ path('app_check_account_by_admin',{'id': account.id }) }}">  {{ account.adminEvent }} </a>
                                                        </button>
                                                    </td>
                                                {% endif %}
                                             {% endif %}
                                            </tr>
            {% endfor %}
             


         
        </tbody>
    </table>
</div>
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function() {
        $('#example').DataTable({
             
            "autoWidth": false,
            "scrollX": true,
        });
    });
    function helllko () {
        $('#example').DataTable()
            .rows().invalidate('data')
            .draw(false);

    }
    $.fn.dataTable.ext.errMode = 'none';

    window.draw = helllko();
</script>
               </main>
    
            <footer class="w-full bg-white text-right p-4">
                By ANCIENT STUDIO
            </footer>
        </div>
        
    </div>
    <!-- AlpineJS -->
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
     
     
</body>
</html>
        {% endblock %}
         

     

 